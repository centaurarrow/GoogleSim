<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
      #panel {
        position: absolute;
        top: 5px;
        left: 50%;
        margin-left: -180px;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
      }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA8yIIQagPjfQkOJ9a4XE14z6g4EZ62dNY&sensor=true">
    </script>
    <script type="text/javascript">
      var map;
      var markers= [];
      var cnt=0;;
      function initialize(){
    	  //create the mapOptions object.
        var myLatLng = new google.maps.LatLng(41.7875, -87.6061);
    	var mapOptions = {
    		center: myLatLng,
    		zoom : 12,
    		mapTypeId : google.maps.MapTypeId.TERRAIN
   		};
    	
    	//create the map object
    	map = new google.maps.Map(document.getElementById("map-canvas"),mapOptions);

    	google.maps.event.addListener(map,'click',function(event){
    		addMarker(event.latLng);
    	});
      }
      
      //addMarker function
      function addMarker(location){
    	  var marker = new google.maps.Marker({
    		  position:location,
    		  map:map,
    		  draggable:true,
    		  animation:google.maps.Animation.DROP,
    	  });

    	  markers.push(marker);
    	  google.maps.event.addListener(marker,'click',toggleBounce(markers[cnt]));
    	  cnt++;
      }
      
      function toggleBounce(mrkr){
    	  if(mrkr.getAnimation()!=null){
    		  mrkr.setAnimation(null);
    	  } else{
    		  mrkr.setAnimation(google.maps.Animation.BOUNCE);
    	  }
      }
      
      //set the map on all markers in the array
      function setAllMap(map) {
    	  for(var i=0;i<markers.length;i++){
    		  markers[i].setMap(map);
    	  }
      }
      
   // Removes the markers from the map, but keeps them in the array.
      function clearMarkers() {
        setAllMap(null);
      }

      // Shows any markers currently in the array.
      function showMarkers() {
        setAllMap(map);
      }

      // Deletes all markers in the array by removing references to them.
      function deleteMarkers() {
        clearMarkers();
        markers = [];
        cnt=0;
      }  
  	//create an event to load 
  	google.maps.event.addDomListener(window,'load',initialize);

  	</script>
  </head>
  <body>
    <div id="panel">
      <input onclick="clearMarkers();" type=button value="Hide Markers">
      <input onclick="showMarkers();" type=button value="Show All Markers">
      <input onclick="deleteMarkers();" type=button value="Delete Markers">
    </div>
    <div id="map-canvas"/>
  </body>
</html>